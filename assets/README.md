# 💰 资产追踪系统

## 📁 文件结构

```
assets/
├── README.md                      # 本说明文件
├── assets_snapshot.csv           # 资产快照记录（按月）
├── reconciliation/               # 对账记录文件夹
│   └── 2025-11_reconciliation.md # 每月对账报告
└── templates/
    └── monthly_reconciliation_template.md
```

## 📊 资产快照说明

### assets_snapshot.csv

记录每月初（或月末）的资产余额快照，用于：
- 追踪资产变化趋势
- 核对账本记录准确性
- 计算月度资产净增长

**记录时机**：每月1号或每月最后一天

**记录内容**：
- 现金及银行存款
- 各类电子钱包余额
- 积分/里程
- 证券账户市值（可选：只记录现金部分或包含持仓市值）
- 信用卡可用额度（可选）

---

## 📋 资产分类

### 1. 💵 现金类资产
- 现金（日元现钞）
- 三井银行存款

### 2. 📱 电子钱包
**JPY电子钱包**：
- PayPay
- Suica
- WAON
- JAL Pay
- ANA Pay
- 乐天Pay
- AU Pay
- Paseli

**RMB电子钱包**：
- 支付宝

### 3. 🎁 积分/里程
- 楽天ポイント
- ANAマイル
- JALマイル
- 其他信用卡积分

### 4. 📈 证券资产
**定投账户**：
- SBI证券（定投为主）

**交易账户**：
- 楽天证券（股票 + CFD + FX）
- IBKR（期权）
- moomoo证券（期权）

**记录方式**：
- 方案A：只记录证券账户的**现金余额**（不含持仓）
- 方案B：记录**总资产**（现金 + 持仓市值）
- 推荐：**方案A**（避免市值波动干扰）

### 5. 💳 信用卡（可选）
记录可用额度，用于监控信用使用率

---

## 🔄 月度对账流程

### 第1步：记录月初快照（每月1号）

在 `assets_snapshot.csv` 添加新的一行，记录所有账户余额。

示例：
```csv
2025-11-01,现金,现金,JPY,50000,
2025-11-01,银行,三井银行,JPY,1500000,
2025-11-01,电子钱包,PayPay,JPY,8500,
...
```

### 第2步：计算上月收支

从 `accounts/transactions.csv` 中筛选上个月的交易（按账户币种折算自身币种，不混算 JPY/RMB），统计：
- 总收入（JPY + RMB）
- 总支出（JPY + RMB）
- 净收支（收入 - 支出）

### 第3步：对账检查

**期望公式**：
```
本月初资产 = 上月初资产 + 上月净收支
```

**如果不等**：
- 检查是否有遗漏的交易
- 检查是否有转账记录错误
- 检查是否有投资盈亏未记录

### 第4步：生成对账报告

在 `reconciliation/YYYY-MM_reconciliation.md` 生成报告。

---

## 📝 对账报告模板

```markdown
# 2025年11月对账报告

## 📊 资产概览

### 月初资产（2025-11-01）
- 现金类：¥XXX,XXX JPY + ¥X,XXX RMB
- 电子钱包：¥XXX,XXX JPY + ¥X,XXX RMB
- 积分/里程：XX,XXX pt / XX,XXX miles
- 证券现金：¥XXX,XXX JPY + $X,XXX USD
- **总资产（JPY等值）**: ¥X,XXX,XXX

### 月末资产（2025-11-30）
- 现金类：¥XXX,XXX JPY + ¥X,XXX RMB
- 电子钱包：¥XXX,XXX JPY + ¥X,XXX RMB
- 积分/里程：XX,XXX pt / XX,XXX miles
- 证券现金：¥XXX,XXX JPY + $X,XXX USD
- **总资产（JPY等值）**: ¥X,XXX,XXX

## 💰 月度收支

### 收入
- 工资：¥XXX,XXX
- 事业收入：¥XXX,XXX
- 投资收益：¥X,XXX
- 其他收入：¥X,XXX
- **总收入**: ¥X,XXX,XXX

### 支出
- 固定支出：¥XXX,XXX（房租、投资等）
- 日常消费：¥XXX,XXX
- 代购成本：¥XXX,XXX
- **总支出**: ¥XXX,XXX

### 净收支
- **净收入**: ¥XXX,XXX

## 🔍 对账结果

### 期望资产
```
月末资产 = 月初资产 + 净收支
期望：¥X,XXX,XXX = ¥X,XXX,XXX + ¥XXX,XXX
```

### 实际资产
```
实际月末资产：¥X,XXX,XXX
```

### 差异分析
- **差异金额**: ¥XXX（实际 - 期望）
- **差异率**: X.XX%

**差异原因**：
- [ ] 投资盈亏：¥XXX
- [ ] 汇率变动：¥XXX
- [ ] 遗漏交易：¥XXX
- [ ] 其他：

## 📈 资产变化趋势

- 月度增长：+¥XXX,XXX (+X.X%)
- 年度累计：+¥XXX,XXX (+X.X%)

## ⚠️ 异常提醒

- 无异常 / 发现XX笔可疑交易

## 📝 备注

其他重要说明...
```

---

## 💡 使用建议

### 记录频率
- **推荐**：每月1号记录资产快照
- **可选**：月末也记录一次，便于对账

### 证券账户处理
- **现金部分**：准确记录
- **持仓市值**：
  - 如果长期持有，可以不记录（避免波动）
  - 如果需要追踪净资产，可以记录总市值

### 积分/里程
- 可以按1pt = 1JPY估值
- 或单独记录数量，不计入总资产

### 信用卡额度
- 可选记录
- 主要用于监控是否超额使用

---

## 🎯 对账目标

### 短期目标（每月）
- 差异率控制在 ±1% 以内
- 及时发现遗漏交易

### 长期目标（每年）
- 追踪年度资产增长
- 评估投资效果
- 优化消费结构

---

## 🔧 工具支持

### Python工具（可选开发）
- `tools/assets_snapshot.py` - 快速记录资产快照
- `tools/reconciliation.py` - 自动生成对账报告
- `tools/assets_analysis.py` - 资产趋势分析

---

## 📅 时间表

| 日期 | 任务 |
|------|------|
| 每月1号 | 记录资产快照 |
| 每月3-5号 | 生成上月对账报告 |
| 每月10号 | 检查差异，补录遗漏交易 |

---

## 🚀 下个月（11月）启动计划

1. **11月1日**：记录所有账户余额到 `assets_snapshot.csv`
2. **11月5日**：生成10月对账报告
3. **每月持续**：保持记录习惯

需要我帮你准备具体的账户清单吗？
